<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>三人抽選器（含技能）</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 2rem;
        background-color: #fdfdfd;
        text-align: center;
      }
      .result,
      .history {
        margin-top: 1.5rem;
        font-size: 1.1rem;
        color: #333;
      }
      .history {
        text-align: left;
        margin: 2rem auto;
        width: fit-content;
        max-width: 90%;
      }
      button {
        padding: 0.6rem 1.2rem;
        font-size: 1rem;
        margin: 0.5rem;
        cursor: pointer;
      }
      .history-entry {
        margin-bottom: 1rem;
        border-bottom: 1px dashed #aaa;
        padding-bottom: 0.5rem;
      }
    </style>
  </head>
  <body>
    <h1>🎲 三人抽選器（含技能）</h1>
    <p>為 1號、2號、3號各抽一位角色，並隨機附上 1 個大招(V) 和 1 個小技能(F)</p>
    <button onclick="draw()">抽選！</button>

    <div class="result" id="result"></div>

    <h2>📜 歷史記錄</h2>
    <div class="history" id="historyLog"></div>

    <script>
      const characterSkills = {
        寧紅夜: { V: ["V1", "V2"], F: ["F1", "F2"] },
        沈妙: { V: ["V1", "V2"], F: ["F1", "F2"] },
        天海: { V: ["V1", "V2"], F: ["F1", "F2"] },
        殷紫萍: { V: ["V1", "V2"], F: ["F1", "F2"] },
        特木爾: { V: ["V1", "V2", "V3"], F: ["F1", "F2", "F3"] },
        季滄海: { V: ["V1", "V2"], F: ["F1", "F2"] },
        土御門胡桃: { V: ["V1", "V2"], F: ["F1", "F2"] },
        妖刀姬: { V: ["V1", "V2", "V3"], F: ["F1", "F2", "F3"] },
        崔三娘: { V: ["V1", "V2"], F: ["F1", "F2"] },
        岳山: { V: ["V1", "V2"], F: ["F1", "F2"] },
        無塵: { V: ["V1", "V2"], F: ["F1", "F2"] },
        顧清寒: { V: ["V1", "V2"], F: ["F1", "F2"] },
        武田信忠: { V: ["V1", "V2", "V3"], F: ["F1", "F2", "F3"] },
        迦南: { V: ["V1", "V2"], F: ["F1", "F2"] },
        胡為: { V: ["V1", "V2", "V3"], F: ["F1", "F2", "F3"] },
        季瑩瑩: { V: ["V1", "V2"], F: ["F1", "F2"] },
        玉玲瓏: { V: ["V1", "V2"], F: ["F1", "F2"] },
        哈迪: { V: ["V1", "V2"], F: ["F1", "F2"] },
        魏輕: { V: ["V1", "V2"], F: ["F1", "F2"] },
        劉煉: { V: ["V1", "V2"], F: ["F1", "F2"] },
        張起靈: { V: ["V1", "V2"], F: ["F1", "F2"] },
        席拉: { V: ["V1", "V2"], F: ["F1", "F2"] },
        藍夢: { V: ["V1", "V2"], F: ["F1", "F2"] },
      };

      function getRandomFromArray(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      function draw() {
        const allCharacters = Object.keys(characterSkills);
        const shuffled = [...allCharacters].sort(() => Math.random() - 0.5);
        const selected = shuffled.slice(0, 3);
        const results = selected.map((name, index) => {
          const skill = characterSkills[name];
          const vSkill = getRandomFromArray(skill.V);
          const fSkill = getRandomFromArray(skill.F);
          return `${index + 1}號：${name}（${vSkill} / ${fSkill}）`;
        });

        const resultHTML = results.join("<br>");
        document.getElementById("result").innerHTML = resultHTML;

        const timestamp = new Date().toLocaleTimeString();
        const historyEntry = document.createElement("div");
        historyEntry.className = "history-entry";
        historyEntry.innerHTML = `<strong>${timestamp}</strong><br>${resultHTML}`;

        const historyLog = document.getElementById("historyLog");
        historyLog.prepend(historyEntry);
      }
    </script>
  </body>
</html>
